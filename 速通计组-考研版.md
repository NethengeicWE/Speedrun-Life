# 速通计算机组成原理-考研版
## 前言：
* 基于王道408-2025版复习资料，**千万不要去z-library上下载盗版**
* 善用LLM
* 对本科老师的吐槽详见原版
## C1 概述（略）
## C2 数据表示与运算
### 2.1 进制与转化
> p进制，q表示单个数字  
> **$\sum_{i=0}^{n}q_i\cdot p^i$**
* 2进制转8进制：3个二进制转1个8进制
* 2进制转16进制：4个二进制转1个16进制
    * 两个16进制恰好是1Btye：0A:1B:2C:3D:4E:5F
* 10进制转2进制：
    * 整数：累除2，余数作值
    * 小数：累乘2，进值作值
* 未指明时第一位作符号位，单符号表示的范围缩小一半，但整体不变
* 机器的定点表示
    * 原码：直接对应真  值
        * 易于乘法，复杂减法，0的表示不唯一
    * 补码：负数原码+数据格式最大值
        * 快速计算：原码取位反+1
        * 特殊情况：双符号位的补码表示
* C语言应用：
    * 长度：**char-8，short-16，int-32，long-64**
    * 符号：signed有符号整数（使用补码）与unsigned无符号整数
        * 只转换值意义，数值不改变

### 2.2 运算方法
* 基本组件：算术逻辑单元ALU，功能包括加减乘除，与或非，异或，移位求补
    * 带标志加法器：使得加法器能生成特殊标志-溢出OF，输出符号SF，进位/借位CF
        * 进位/借位：无符号计算溢出或者不够减
        * 溢出检测：
            1. 同符号加减，符号位变化
            1. 双符号位，00/11表示正负，01上溢，10下溢
    * 多种功能聚合：多路选择器
        * 逻辑位移：左右移动，空位补0；无符号左移需要考虑溢出
        * 算数位移：需要考虑符号位
        * 加减法：加法器的基础上增添一个多路选择器，利用补码=反码+1实现减法
        ------
        * 乘法：每一位同或，然后乘数左移继续
        * 除法：每一位异或，不下溢出商位位1，结果和除数右移继续异或
            * 他们使用相同的私有寄存器，双倍大小的寄存器用于寄存余数和商 / 乘积和右移

### 2.3 浮点数
* 表示：IEEE754标准：1符号位，8指数位，23小数位
    > 详细解释：类似于**科学计数法**，指数位代表数量级，小数位代表具体数值    
    > 指数位需要表示0，所以每一位的**表示均-1**，所以$(1000 0000)_{2} = 127_{10}$  
    * 范围：在整数的基础上，**不能表示极小的数字**
    * 规格化：避免一个数值多种表示---小数位尽可能靠左以容纳更多
* 计算
    1. 对阶：指数位相等
    1. 尾数加减：字面意义
    1. 规格化：前文提及
    1. 舍入：尾数右移会导致丢失精度，就近舍入/正向舍入/负向舍入/直接截断
    1. 溢出判断：针对指数
* 大小端：自然读取顺序为大端，反之为小端
    > 通过出入栈理解
    > 网络协议使用大端，CPU内部使用小端
* 填充方式：计算机存储按字节计量
    > 无论字长还是数据格式，均按照8bit为一单位处理，浪费微小空间换取更快读取
* C语言应用
    * 隐式转换：小格式转大格式不会有任何消耗，不同类型的混合运算中自动进行小转大
        * int \to float：可能会溢出
        * int \to double：不会超
        * double or float \to int：截断小数部分
    * 填充方式的补充：结构体内成员数值的顺序会影响到结构体大小

## C3 存储系统
### 3.1 概述
* 分类：
    * 按照层次：
        * 主存储器：简称主存，也称内存，存放运行期间所需的程序与数据
        * 辅助存储器：简称辅存，又称外存，存放当前不需要的数据与程序，或者永久保存的信息，不能直接调用
        * 高速缓冲存储器：简称cache，缓存，CPU内置
    * 按照介质：磁表面（磁盘，磁带），磁芯（机械硬盘），半导体（固态硬盘），光（光盘）
    * 按照存取方式：
        * 随机存储器RAM：任意单元均可随机存取，时间与位置无关
        * 只读存储器ROM：只能读出不能写入，信息固定后不会掉电丢数据，即使设计上可以写入其性能也比不上RAM
        * 串行访问存储器：进行读写操作时需要按物理位置先后都去，比如磁带
    * 按照保存性：易失性/非易失性
* 性能指标：存储容量，单位成本，存储速度
    * 存储速度：存取时间（启动-完成），存取周期（两次操作间隔，尤其是破坏性读取），主存带宽
* 多层级存储：”不可能三角“的解决方案

### 3.2 主存
* SRAM：静态随机存储器，用于cache
    * 组成：6晶体管，非破坏性读出，功耗大，占地大，速度极快
* DRAM：动态随机存储器，用于主存
    * 组成：栅极电容+1晶体管，密度高，功耗低，速度稍慢
    * 动态：电荷只能维持1-2ms，需要刷新。对CPU透明
        * 集中刷新：刷新周期内处理所有数据，期间访存被阻塞
        * 分散刷新：工作周期分为读写和刷新，只刷新一部分区域
    * 读取方式：行地址送达，激活行，列地址送达，激活列，关闭行，关闭列。
        * 行关闭先于列关闭，会出现一段时间周期有效
    * 结构：
        * 存储器：存储单元结合，通过行选择和列选择控制访问哪个单元
        * 地址译码器：将地址转为选择线
        * IO控制电路：控制读出与写入，由于电容很小，需要放大信息
        * 片选器：一个存储单元可能会叠加多个存储单元
        * 读写控制信号：字面意义，又io控制处理
* ROM：可以随机读取，但是不方便写入，保证不丢数据
    * 类型：
        * 掩膜式MROM：生产中固化，后续无法修改，可靠性高
        * 一次可编程PROM：只能写一次
        * 可擦除可编程EPROM：编程次数有限，写入时间过程
        * FLash：兼具ROM和RAM的优点，便宜
        * 固态硬盘：之前贵，现在便宜了
* 组成：类似于DRAM的结构，一个存储单元往往存储1Byte内容
    * 读写：MDR（Memory Data Register）位数对应数据位数，MAR（Memory Address Register）位数对应地址线  
    有时候会使用地址引脚复用技术，行地址与列地址分两次输入  
    最少的地址引脚数量：$\max {log_2 r或c}$
    * 多模块：通过多个完全相同的存储模块并行来提高吞吐量
        * 高位交叉编址：前几位用于控制激活哪个模块，模块内地址连续，没有并行性
        * 低位交叉编制：前几位表示模块内地址，后面控制激活模块，具有并行性

### 3.3 连接
* 原理：主存通过数据总线，地址总线和控制中线控制  
* 常用标志：
    * $A_n$：第n位地址线
    * $D_n$：第n位数据线
    * $\bar{WE}$：读写控制线
    * $\bar{CS}$：开关控制线
* 主存扩展：单个存储容量有限
    * 位扩展（扩展数据线）：每个存储块接收相同的地址线，单独接入一根数据总线
    * 字扩展（扩展地址线）：扩展部分地址位用以开关存储块，每个存储块接入相同的数据中线
    * 同时扩展：使用两种扩展，他们并不冲突
* 合理选择存储芯片，正确连接控制线和数据，地址线

### 3.4 外存
* 磁盘存储器
    * 特点：容量大，价格低，重复使用，长期保存。慢，机械结构
    * 性能指标：记录密度，磁盘容量
    * 结构：
        * 磁头：读取/写入工具
        * 柱面：不同盘面的相同半径位置，不同柱面存在间隙
        * 扇区：角度分类，不同扇区存在间隙
        * 磁盘缓存：在内存/主控上的RAM
    * 寻址方式：柱面+盘面+扇区
    * RAID阵列：多个物理磁盘组成一个逻辑磁盘
        * RAID0：无冗余与校验
        * RAID1：镜像磁盘阵列
        * RAID2：海明码纠错
        * RAID3：位交叉奇偶校验
        * RAID4：块交叉奇偶校验
        * RAID5：无独立校验的奇偶校验
* 固态硬盘
    * 特点：随机访问快，没有机械问题，但是存在寿命
        * 磨损均衡：控制常用数据不会在一个物理位置上使用
    * 组成：一个闪存-若干块-每个块内若干页，会有一个分区存储表来进行数据定位
    
### 3.5 高速缓存
* 程序局部性：包括时间局部性和空间局部性
    > 说人话就是程序不会乱拿乱用东西，用一个很小但是速度快的存储就能明显改善使用，这就是cache的意思所在
    * 为方便与主存交换信息，cache和主存划分相同大小的块，显然cache块的数量远少于主存
* 地址映射问题
    * cache保存的是主存最活跃的若干块的数据副本
    * CPU发出读写请求时需要将地址转为cache地址进行读写，如果不在cache中还需要将主存块中调入，如果cache满还需要替换
    * 主存与缓存的访问时间完全不是一个数量级，高缓存命中能有效提高效率
        * 数据查找：每个cache块都有标记位（标记缓存块对应的主存块），索引（缓存行的位置）和标记项（有效位，脏位，替换控制位，前面提及的标记位）
    * 地址映射：
        * 直接映射：主存每一块只能装入cache的唯一位置，如果冲突则直接顶掉，故无需替换策略  
        地址划分：标记，索引（与标记一起表示主存地址），块内偏移（块大小）
        * 全相联映射：主存每一块都能装入cache任何位置，利用率高，命中高，但实现成本高，需要比对内容才知道是否命中  
        地址划分：标记（主存地址），块内偏移
        * 组相联映射：综合前两种，cache块被分成若干大小相等的组，组间直接映射，组内全相连映射  
        地址划分：标记，组号（与标记一起表示主存地址），块内偏移
* 替换策略：与操作系统有关
    * 随机算法RAND：字面意义
    * 先进先出FIFO：替换最先进入cache的块
    * 近期最少使用LRU：替换最少使用的块，需要计数器
* 写入策略：cache一致性问题
    * 全写法：同时写入cache和主存，会加入一个写缓冲以缓解写入主存的时间，但会出现缓冲溢出
    * 回写法：只有当块被替换时才写回主存，需要一个脏位标记是否被修改
    * 当写操作不命中时：调入cache写入在写回/直接写入主存
    * 多级cache：分离数据与指令缓存，容量越大，访问越慢，但是始终比主存快

### 3.6 虚拟存储器
* 主存与辅存共同构成虚拟存储器，对于应用程序而言，虚拟存储器是透明的
* 虚拟地址/逻辑地址对应主存和存储
    * 采用全相联映射提高命中率，写操作采用回写法（写回存储延迟更高）
* 页式虚拟存储器：页为基础单元
    * 结构：有效位（在主存还是磁盘），脏位（是否修改），引用位（使用位），地址（对应主存或磁盘）
    * 优缺点：易于调控，但是浪费空间
    * 地址转换：虚拟地址转主存物理地址，虚页号和页内偏移地址

## C4 指令系统
> 即刻开饭！
### 4.1 指令系统
* ISA（Instruction System Architecture）：一台计算机所有指令集合
    1. 指令格式
    1. 操作数类型与寻址方式
    1. 寄存器编号与位数
    1. 程序执行过程的控制方式
* 基本格式：操作码+N*数据地址
    * 指令字长：一条指令的位数，可以小于机器字长，也可以超过机器字长，但是更耗时
* 指令分类：依据数据地址数量
    1. 0地址：本来就不需要操作数 / 堆栈操作，数据已经压入寄存器
    1. 1地址：结果存回原地址 / 取另一个指令
    1. 2地址：两个输入，输出存回第一个
    1. 3地址：两个输入，指定了输出地址
    1. 4地址：比3地址多了个下一条指令的地址
* 操作码：定长/可变
    * 定长：浪费带宽和寄存器，好在简单且快
    * 变长：浪费一点操作码位数，用于分类操作码类型
* 类型
    1. 数据传递：存储转存
    1. 算数，逻辑运算
    1. 移位操作
### 4.2 寻址方式
* 指令寻址：顺序寻址（PC+1），跳跃寻址（直接给地址/给偏移量）
* 数据寻址：数据存储类型不同，需要寻址特征码。地址也需要转换为真实地址
    1. 隐含寻址：地址在特定的寄存器中，由指令设计时决定
    1. 立即寻址：地址就是操作数
    1. 直接寻址：在主存上-形式地址 == 真实地址
    1. 间接寻址：在主存跳转一次
    1. 寄存器寻址：在寄存器上-形式地址 == 真实地址
    1. 寄存器间接寻址：在寄存器上找到主存的地址
    1. 相对寻址：加上当前程序计数器的值，得到其地址
    1. 基址寻址：加上基址寄存器的值获得其地址
    1. 变址寻址：加上变址寄存器的值获得其地址
        > 以上三个统称为偏移寻址
    1. 堆栈寻址：
        * 栈：硬件设计/软件划分的一片后进先出的存储区 
### 4.3 程序的机器代码表示
* 主要寄存器：  

    | 2Byte | 1Byte | 1Byte |
    | - | - | - |
    | | AH | AL |
    | | BH | BL |
    | | CH | CL |
    | | DH | DL |
    | ESI | ESI | ESI | ESI |
    | EDI | EDI | EDI | EDI |
    | EBP | EBP | EBP | EBP |
    | ESP | ESP | ESP | ESP |

    * 解释：
        1. Accumulator：累加器 Base：基地址寄存器 Count:计数寄存器 Data：数据寄存器
            * 32bit下可以扩展为EAX，EBX，16bit下原名，8bit下可以拆分成AH（High），AL（Low） 
        2. ESI，EDI：变址寄存器（index）
        3. EBP，ESP：堆栈基，堆栈顶指针（Base，Stack）
* 格式：Intel格式
    * 操作数：**to-from**
    * 寄存器(%)立即数($)不需要前缀
    * 数据长度：word（字，16b），dword（双字，32b）
    * <reg16> ：任意1字长寄存器的数据
    * <mem>：内存地址内的数据
    * <con8>：8位常数
    * [var]：var指示内存地址
    * 总共：数据长度+指针+指针地址，常数，
* 指令
    1. mov：复制到目标
    1. push：将操作数压入内存栈
    1. pop：捅出栈，压入操作数地址
    1. add/sub：对应c++的 += 与 -= 
    1. inc/dec：对应c++的 ++ 与 -- 
    1. imul：有符号整数乘法，分为2操作数和3操作数，to必须是寄存器
    1. idiv：有符号整数除法，被除数在edx，除数为操作数
    1. and/or/xor：与/或/异或，结果放在to中
    1. not：位反转，每一位翻转
    1. neg：取负数
    1. shl/shr：逻辑左移/右移
    1. IP：自动指向下一条指令，一般不可操作，但可以用控制流更新
        * jmp：此时操作数代表跳转地址
        * j-condition：根据CPU状态字终端一系列条件状态转移
            1. +e：equal，相等
            1. +z；zero，为0
            1. ne：not equal，不等
            1. jg：greater；大于
            1. jge：greater/equal：大于等于
            1. jl：less：小于
            1. jle：less/equal：小于等于
        * cmp/test：相当于sub指令，但不保存操作结果
        * call/ret：call <label>将当前指令压栈，转移到标签指示的指令，执行完成后再ret捅出栈
            1. P将入口参数(实参)放到Q能访问到的地方。
            1. P将返回地址存到特定的地方，然后将控制转移到Q
            1. Q保存P的现场，并为自己的非静态局部变量分配空间
            1. 执行过程Q
            1. Q恢复P的现场，将返回结果放到P能访问到的地方，并释放局部变量
            1. O 取出返回地址，将控制转移到P
* 循环语句的机器语言：
    1. for
        ```c
        // C语言实现
        int nsum_for(int n){
            int i;
            int result = 0;
            for(i=1; i<=n; i++) result +=i;
            return result
        }
        // EZ？
        ```
        ```asm
        #NO EASY
        mov ecx,dword ptr [ebp+8]
        mov eax,0
        mov edx,1
        cmp edx,ecx
        jg .L2
        .L1:
            add eax,edx
            add edx,1
            cmp edx,ecx
            jle ,L1
        .L2:
        ```
### 4.4 CISC与RISC
* Complex Instruction System Computer
    * 指令长度不定长时间不定长，数量多，频率差别大，寻址方式多，微程序，难优化
* Reduced Instruction System Computer
    * 指令长度定长，执行时间定长，数量少，少寻址方式，硬布线控制
## C5 CPU
### 5.1 功能
* 功能：指令控制，操作控制，时间控制，数据加工，中断处理
* 基本结构：运算器（算数逻辑单元，配套的寄存器），控制器（计数器，寄存器，译码器）
    * 通用寄存器：存放操作数，栈
    * 累加寄存器ACC：暂时存放ALU结果
    * 移位寄存器SR：不仅可以存数据，还能移位
    * 暂存寄存器：暂存从总线/通用寄存器的操作数
    * 程序状态寄存器PSW：溢出OF，符号SF，零标志SF，进位标志CF
    ---
    * 程序计数器PC：存储下一条指令的地址
    * 指令寄存器IR：保持当前运行的指令
    * 存储器数据寄存器MDR：存放要与主存交互的信息
### 5.2 执行过程
* 指令周期：取址，取有效地址（定长），执行
* 过程：取址 -> PC+1 -> 间接寻址 -> 执行- -> 中断
    1. **取址：**  
    PC -> MAR --地址总线--> 存储器  
    CU（控制单元）发出读命令 --控制总线--> 存储器  
    主存 --数据总线--> MDR --> IR  
    CU发出控制信号 -> PC++
    1. **间址：**  
    PC -> MAR --地址总线--> 存储器  
    CU（控制单元）发出读命令 --控制总线--> 存储器  
    主存 --数据总线--> MDR
    1. **执行**  
    本章暂不讨论
    1. **中断**：处理中断请求
    SP-1 -> MAR --地址总线--> 存储器  
    CU发出写命令 --控制总线--> 存储器
    PC -> MDR --数据总线--> 主存     # 程序断点存入处理器
    CU（中断服务程序的入口地址） -> PC
* 执行方案：
    * 单周期：即CPI = 1，下一条指令只能在前一条执行结束后才能启动
    * 多周期：即CPI > 1，之零件仍是串行执行
    * 流水线：追求每个时钟周期内完成一条指令执行，通过尽量让多条指令同时进行
        * 超标量流水线：通过重新排序指令执行顺序来尽可能完全使用执行单元
### 5.3 数据通路
* 功能：传递指令与数据
* 组成：
    * 组合逻辑单元：译码器，多路选择器，三态门，不包含记忆单元
    * 时序逻辑元件：各类寄存器，储存器，包含记忆单元
* 结构：
    > 这里应该有一个图片.jpg
    > 大概的意思是所有组件均挂在总线下，由CU控制所有部件的开关
    > 可以使用多总线，一个时钟周期内可以传递更多信息
    > 可以使用专用数据通路，更快，但是更占地
* 过程：指令执行过程的细化：输出端打开out，输入端打开in，其余部件不变
### 5.4 控制器：
* 功能：取指令，下一条指令的地址；指令译码与测试，产生操作控制信号；控制CPU与其他设备的数据流动方向
* 组成
    * 硬布线控制器：操作码译码，通过组合逻辑电路产生控制信号，每个时钟周期发出不同的控制信号
    * 微程序控制器：从ROM/PLA（Programmable Logic Array）中查表，其中也有类似于CPU中的IR和PC
        * 编码方式：
            1. 直接编码：正统查表，直接使用
            1. 字段直接编码：将互斥性微命令编码并放在同一字段中，少一个地址跳转，但是多了译码过程
            1. 字段间接编码：一个微命令由另外一下微命令来解释
        * 地址形成：
            1. 微指令的下地址地段
            1. 机器操作码
            1. 增量计数器
            1. 由标志决定
        * 格式
            1. 水平：上述三种，可并行，编写麻烦
            1. 垂直：操作码+目的地址+源地址，简单且快，不好并行

### 5.5 异常与中断
* 定义：意外事件，即刻响应
* 分类： 
    * 异常：内部问题
        * 故障：指令执行期间的意外事件，比如数据有误，命中失败
        * 自陷：预设异常，用于断点调试和系统服务
        * 终止：终止无法继续运行的程序
    * 中断：外部输入
        * 可屏蔽：通过可屏蔽中断请求线INTR发出中断请求，
        * 不可屏蔽：通过不可屏蔽中断请求线NMI发出中断请求  
        通常是非常紧急的硬件事件，比如电源掉电
 * 响应过程：
    1. 关中断
    1. 保存断点和程序状态
    1. 异常识别，程序跳转

### 5.6 指令流水线
* 概念：通过分解指令操作，增设多个执行单元实现指令的并发执行
    * 指令流程：取址，译码，执行，访存，写回
        * 指令格式最好一致，load/store指令型指令分离数据操作
    * **单条指令执行时间不变，整体吞吐量更大**
* 逻辑结构：执行器间增设流水段寄存器，使用统一时钟同步
* 流水线冒险：后续指令无法执行导致阻塞
    > 冒险的意思是采用流水线增加吞吐量，可能导致其他原来不存在的问题
    * 结构冒险：不同指令争用同一组件，通过推迟/增设组件来避免
    * 数据冒险：数据存在先后关系。通过推迟执行/转发通路解决
        > 游戏不好做多线程优化的原因，主要逻辑串行依赖  
        > 一种编译优化是计算所有可能性再选用
    * 控制冒险：分支指令导致程序计数器变化，通过推迟/分支预测生成转移目标地址
* 性能指标
    * 吞吐率：单位时间完成的任务数量
    * 加速比：同样一批任务，使用与不使用流水线时间之比
* 高级流水线技术
    * 超标量流水线：并发多条独立指令，并行执行指令，需要配置多个功能组件
    * 超长指令字：由编译器挖掘出潜在的指令并行性，合成具有多个操作码的超长指令字
    * 超流水线：提高统一时钟终频率
    * 乱序执行：调整指令执行顺序，最大化利用执行单元。通过重排序缓冲ROB保证指令按顺序提交
        > 详见极客湾视频，他们的科普比绝大部分老师和教材都更好

### 5.7 多处理器
* 分类方法：基于指令流数量和数据流数量：Single/Multiple Instruction Single/Multiple Data
    * SISD：单处理器单存储器
    * SIMD：一条指令处理多条数据
        * 数据并行模式
        * 变体：向量处理器
    * MISD：不存在
    * MIMD：多计算机系统/多处理器系统，前者存储器不互通
* 硬件多线程：  
    线程切换开销较大，通过提供多组寄存器，只需激活便能切换
    * 细粒度多线程：线程间轮流交叉执行
    * 粗粒度多线程：线程执行至较大开销阻塞时切换
    * 同时多线程：超线程
        > 2002年，Intel在Xeon和Pentium 4处理器上开始引入超线程技术  
        > 2024年起酷睿ultra 200系开始放弃超线程
        > ![alt text](image\image-ultra285k.jpg)  
        > 图片来源：万扯淡
* 多核处理器：多个处理单元（Core）集成到单个CPU中，可以共享cache也可以私有cache，但总是共享内存
    * 统一存储访问UMA：访问所有存储单元的时间相近
    * 非统一存储访问NUMA：某些存储器的访存熟读更快，主存分配给不同处理器
        * 早期计算机访问内存通过前端总线连接到北桥（集成内存控制器），但随着性能提升，前端总线成为瓶颈。NUMA被提出以解决该问题，CPU间通过QPI总线连接，每个CPU拥有独立的内存控制器，也可通过总线访问其他内存
        * 每个核心的私有cache是内存的一部分副本，因此核心间的cache的一致性也应该被考虑
## C6 总线
### 6.1 概述
* 定义：多个组件的公共信息传送线路
    * 分时：时分复用
    * 共享：一个总线可以挂载多个组件
* 主/从设备：主动请求还是被动接受
* 特性：物理规格，功能特性，时间特性
* 功能层次
    * 片内总线：CPU内部，intel的ring，amd的infinite fabric
    * 系统总线：CPU和其他连接的线路
    * I/O总线：连接中低速的IO设备，PCIe，USB  
    * 通信总线：与其他系统传递信息
    ---
    * 同步总线：使用相统一的时钟
    * 异步总线：不使用统一时钟，通过信号握手协调设备间的传输
    ---
    * 串行总线：一条双向/两条单向数据按比特位串行顺序传输，效率低，抗干扰
    * 并行总线：多条数据线，效率高，但易受干扰
* 结构
    * 单总线：所有设备挂载在同一总线下
    * 双总线：一条主存总线，一条IO总线
    * 三总线：一条主存总线，一条IO总线，一条DMA
* 常见标准
    * ISA：工业体系结构
    * EISA：扩展ISA
    * VESA：视频信号线
    * PCI：外部设备互联
        * PCIe：高数串行双通道
        * RS-232C
    * AGP：加速图形接口，当年的显卡不能处理3维渲染，需要加速卡
    * USB：通用串行总线
    * PCMCIA：笔记本的接口标准
    * IDE：集成设备电路
    * SCSI：小型计算机系统接口
    * STA：串行高级技术附件，用于机械硬盘
* 性能指标：
    * 总线时钟周期/频率
    * 总线传输周期：包括申请，寻址，传输，结束
    * 总线工作频率
    * 总线位宽
    * 总线带宽=总线位宽*工作频率
    * 总线复用：一根线可能承担多种功能
    * 信号线数
### 6.2 总线事务
* 总线事务：一个总线周期中的一系列活动
    1. 请求：主设备发出传输请求，获得控制权
        * 突发传送
    1. 仲裁：总线仲裁机构决定下一个周期的使用权
    1. 寻址：主设备给出访问从设备的地址与命令
    1. 传输：设备间进行数据交换
    1. 释放：让出使用权
* 总线定时：
    * 同步定时：严格控制双方的时钟信号。速率高，距离短
    * 异步定时：通过握手信号（请求，回答）控制定时。更灵活
        * 请求信号是否互锁：不互锁，半互锁，全互锁
    * 半同步：
    * 分离式定时
## C7 IO系统

